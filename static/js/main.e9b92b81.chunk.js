(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],[,,,,,,,,,,function(e,t,r){e.exports=r(22)},,,,,function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var n,a,i=r(0),o=r.n(i),s=r(9),c=r.n(s),l=r(1),u=o.a.createContext({triggerUpdate:function(){},switchActiveView:function(e){},setPuzzle:function(e){},createNewPuzzle:function(e,t){},exportPuz:function(){}});r(15);!function(e){e[e.White=0]="White",e[e.Black=1]="Black"}(n||(n={})),function(e){e[e.Across=0]="Across",e[e.Down=1]="Down"}(a||(a={})),window.Globals={};var d,f=window.Globals;!function(e){e[e.None=0]="None",e[e.Rotate180=1]="Rotate180",e[e.Rotate90=2]="Rotate90",e[e.MirrorHorizontal=3]="MirrorHorizontal",e[e.MirrorVertical=4]="MirrorVertical",e[e.MirrorNWSE=5]="MirrorNWSE",e[e.MirrorNESW=6]="MirrorNESW"}(d||(d={}));var h,v,m=r(3);!function(e){e[e.User=0]="User",e[e.ChosenWord=1]="ChosenWord",e[e.HoverChosenWord=2]="HoverChosenWord",e[e.ChosenSection=3]="ChosenSection",e[e.HoverChosenSection=4]="HoverChosenSection",e[e.Autofill=5]="Autofill"}(h||(h={})),function(e){e[e.NotAThing=0]="NotAThing",e[e.Iffy=1]="Iffy",e[e.Crosswordese=2]="Crosswordese",e[e.Normal=3]="Normal",e[e.Lively=4]="Lively"}(v||(v={}));var p=r(7),y=r(2),g=r.n(y),w=r(4);function E(){return(E=Object(w.a)(g.a.mark((function e(t,r){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.text();case 2:return n=e.sent.split("\n"),N(a=b(n),f.wordList),e.abrupt("return",{filename:t,wordCount:a.length});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){var t=f.qualityClasses||new Map,r=[];return e.forEach((function(e){var n=e.trim().split(";");if(!(n.length>2)&&n[0].match(/^[A-Z]+$/)){var a=2===n.length?+n[1]:50,i=a>=100?v.Lively:a>=50?v.Normal:a>=40?v.Crosswordese:v.Iffy,o=n[0];o.length>=2&&o.length<=15&&i!==v.Iffy&&(t.has(o)||r.push(o),t.set(o,i))}})),f.qualityClasses=t,r}function C(e){var t=f.wordList,r=[];if(e.length>15)return r;for(var n=[],a=e.length,i=0;i<e.length;i++)"-"!==e[i]&&n.push([i+1,e[i]]);if(1===n.length)r=t.buckets.oneVal[a-2][n[0][0]-1][n[0][1].charCodeAt(0)-65];else if(n.length===e.length){var o;r=(null===(o=f.qualityClasses)||void 0===o?void 0:o.has(e))?[e]:[]}else if(n.length>1){var s=n[0][0],c=n[1][0],l=n[0][1],u=n[1][1];r=t.buckets.twoVal[a-2][s-1][c-(s+1)][l.charCodeAt(0)-65][u.charCodeAt(0)-65];for(var d=function(e){r=r.filter((function(t){return t[n[e][0]-1]===n[e][1]}))},h=2;h<n.length;h++)d(h)}return r}function N(e,t){for(var r=t?t.buckets:{oneVal:[],twoVal:[]},n=2;n<=15;n++){r.oneVal.push([]);for(var a=1;a<=n;a++){r.oneVal[n-2].push([]);for(var i=65;i<=90;i++)r.oneVal[n-2][a-1].push([])}}for(var o=2;o<=15;o++){r.twoVal.push([]);for(var s=1;s<=o-1;s++){r.twoVal[o-2].push([]);for(var c=s+1;c<=o;c++){r.twoVal[o-2][s-1].push([]);for(var l=65;l<=90;l++){r.twoVal[o-2][s-1][c-(s+1)].push([]);for(var u=65;u<=90;u++)r.twoVal[o-2][s-1][c-(s+1)][l-65].push([])}}}}e.forEach((function(e){for(var t=1;t<=e.length;t++)r.oneVal[e.length-2][t-1][e[t-1].charCodeAt(0)-65].push(e);for(var n=1;n<e.length;n++)for(var a=n+1;a<=e.length;a++)r.twoVal[e.length-2][n-1][a-(n+1)][e[n-1].charCodeAt(0)-65][e[a-1].charCodeAt(0)-65].push(e)})),f.wordList={buckets:r}}function S(e,t){if(t&&ze(e.fillWord)===e.iffyWordKey)return k(e),!0;if(0===e.anchorSquareKeys.length){var r=e.fillWord,n=W(we(e.startGrid,r));e.anchorCombosLeft=n.anchorCombosLeft,e.anchorSquareKeys=n.anchorSquareKeys}for(var a=[];A(e,t),a=re(e),0!==e.anchorCombosLeft.length&&!(a.filter((function(e){return!e.iffyWordKey})).length>(t?100:0)););return e.entryCandidates.sort((function(e,t){return t.score-e.score})),!0}function k(e,t){if(void 0===t&&(t=!1),!(e.entryCandidates.length>0&&t)){var r=e.fillWord,n=C(se(me(we(e.startGrid,r)))).sort((function(e,t){return f.qualityClasses.get(t)-f.qualityClasses.get(e)}));e.entryCandidates=[],n.forEach((function(t){e.entryCandidates.push({word:t,score:ne(t),isViable:!0,hasBeenChained:!1,wasChainFailure:!1,crossScore:0,minCrossScore:0})}))}}function W(e,t){var r=[];if(e.forEach((function(e){var n=t&&t.has(Ae(e))?t.get(Ae(e)).length:function(e){return e.viableLetters?e.viableLetters.length:26}(e);if(0!==n)return r.length<2?(r.push([Ae(e),n]),void r.sort((function(e,t){return e[1]-t[1]}))):void(n<r[1][1]&&(r[1]=[Ae(e),n],r.sort((function(e,t){return e[1]-t[1]}))))})),r.length<2)return{anchorSquareKeys:[],anchorCombosLeft:[]};var n=[r[0][0],r[1][0]],a=function(e,t,r){var n,a=t.map((function(t){return e.find((function(e){return Ae(e)===t}))})).map((function(e){return e.content?[e.content]:r&&r.has(Ae(e))?r.get(Ae(e)):e.viableLetters||ve})),i=[],o=new Map,s=Object(m.a)(a[0]);try{for(s.s();!(n=s.n()).done;){var c,l=n.value,u=Object(m.a)(a[1]);try{for(u.s();!(c=u.n()).done;){var d=c.value;i.push([l,d]),o.set("[".concat(l,",").concat(d,"]"),(z[l]+z[d])*Math.random())}}catch(f){u.e(f)}finally{u.f()}}}catch(f){s.e(f)}finally{s.f()}return i.sort((function(e,t){return o.get("[".concat(e[0],",").concat(e[1],"]"))-o.get("[".concat(t[0],",").concat(t[1],"]"))})),i}(e,n,t);return{anchorSquareKeys:n,anchorCombosLeft:a}}var z={A:8.2,B:1.5,C:2.8,D:4.3,E:13,F:2.2,G:2,H:6.1,I:7,J:.15,K:.77,L:4,M:2.4,N:6.7,O:7.5,P:1.9,Q:.095,R:6,S:6.3,T:9.1,U:2.8,V:.98,W:2.4,X:.15,Y:2,Z:.074};function A(e,t){function r(t){var r=(n=me(e.startGrid)).words.get(t);we(n,r).forEach((function(e){e.content||(e.viableLetters=ve)}))}var n=e.startGrid,a=e.anchorCombosLeft.pop(),i=e.iffyWordKey;i&&r(i);var o=ze(e.fillWord),s=we(n,e.fillWord),c=se(s);if(e.anchorSquareKeys.forEach((function(e,t){c=L(c,a[t],s,e)})),t&&Ne(s))return e.entryCandidates=[],void e.entryCandidates.push({word:c,score:1,isViable:!0,hasBeenChained:!1,wasChainFailure:!1,crossScore:0,minCrossScore:0});var l=M(s,c,void 0,n.usedWords);if(0===l.length&&!t&&!i&&f.maxIffyLength>=s.length)return e.iffyWordKey=o,void e.anchorCombosLeft.push(a);if(0===l.length&&t&&!i&&f.maxIffyLength>0){var u,d=te(n,e.fillWord).map(ze),h=Object(m.a)(d);try{for(h.s();!(u=h.n()).done;){var v=u.value;if(ke(n.words.get(v))>f.maxIffyLength)return;return e.iffyWordKey=v,void e.anchorCombosLeft.push(a)}}catch(w){h.e(w)}finally{h.f()}}var y=l.length>0?1e5/l.length:1;function g(t,r,a){var i=!0,s=1,c=new Map,l=0,u=1e8,d=me(n.usedWords);d.set(t,!0);var f=new Map;f.set(o,!0);for(var h=new Map,v=0,m=function(){var e=!1,m=new Map;return f.forEach((function(f,y){if(i&&!(s>1&&v>r)&&y!==a){var g=n.words.get(y),w=we(n,g);1===s&&w.forEach((function(e,r){c.set(Ae(e),[t[r]])})),ee(n,g).forEach((function(t){if(i){var r=ze(t);if(!m.has(r)&&r!==a&&r!==o&&!h.has(r)){var f=we(n,t);if(!Ne(f)){var y=se(f),g=[],w=W(f,c);if(w.anchorCombosLeft.length>20)return v+=500,l+=300,void(300<u&&(u=300));if(w.anchorCombosLeft.forEach((function(e){var t=y;w.anchorSquareKeys.forEach((function(r,n){t=L(t,e[n],f,r)})),g.push.apply(g,Object(p.a)(M(f,t,c,d))),1!==s||1!==w.anchorCombosLeft.length||t.includes("-")||(d.set(t,!0),h.set(r,!0))})),0!==g.length){if(v+=g.length,1===s){var E=g.map((function(e){return ne(e)})).reduce((function(e,t){return e+t}),0);l+=E,E<u&&(u=E)}f.forEach((function(t,r){var n=Array(26).fill(!1);g.forEach((function(e){n[e[r].charCodeAt(0)-65]=!0}));var a=Fe(n),i=c.get(Ae(t));(!i||i.length>a.length)&&(e=!0),c.set(Ae(t),a)})),m.set(r,!0)}else i=!1}}}}))}})),e&&i?(f=m,void s++):"break"};;){if("break"===m())break}if(!i)return!1;l>e.topCrossScore&&(e.topCrossScore=l),u>e.topMinCrossScore&&(e.topMinCrossScore=u);var y=void 0;if(a){var g=n.words.get(a),w=we(n,g),E=se(w);w.forEach((function(e,t){var r=c.get(Ae(e));!e.content&&r&&1===r.length&&(E=E.substring(0,t)+r[0]+E.substring(t+1))})),y=E}return(!y||!d.has(y))&&(e.entryCandidates.push({word:t,score:-1,isViable:i,hasBeenChained:!1,wasChainFailure:!1,iffyEntry:y,iffyWordKey:a,crossScore:l,minCrossScore:u}),!0)}l.forEach((function(t){if(!g(t,y,i)&&!e.iffyWordKey&&f.maxIffyLength>0){var a=te(n,e.fillWord).map(ze),s=new Map;a.forEach((function(e){var a=n.words.get(e);te(n,a).forEach((function(e){ze(e)!==o&&s.set(ze(e),!0)})),ke(a)>f.maxIffyLength||(r(e),g(t,y,e))})),s.forEach((function(e,a){ke(n.words.get(a))>f.maxIffyLength||(r(a),g(t,y,a))}))}})),e.entryCandidates.forEach((function(t){t.score=function(e,t){var r=ne(t.word),n=e.topCrossScore>0?t.crossScore/e.topCrossScore:1,a=e.topMinCrossScore>0?t.minCrossScore/e.topMinCrossScore:1;return(n+a)*r*(t.iffyWordKey?1:100)}(e,t)}))}function M(e,t,r,n){var a=[];return function(e,t,r){var n=e.map((function(e,n){return"-"!==t[n]?[n,[t[n]]]:r&&r.has(Ae(e))?[n,r.get(Ae(e))]:[n,e.viableLetters||ve]})).filter((function(e){return e[1].length>0})).sort((function(e,t){return t[1].length-e[1].length})),a=[t],i=function(){var e=n.pop();if(e[1].length>=6)return{v:a};var t=e[0],r=e[1],i=[];r.forEach((function(e){a.forEach((function(r){i.push(r.substring(0,t)+e+r.substring(t+1))}))})),a=i};for(;n.length>0&&a.length<12;){var o=i();if("object"===typeof o)return o.v}return a}(e,t,r).forEach((function(e){a.push.apply(a,Object(p.a)(C(e)))})),a.filter((function(t){if(n&&n.has(t))return!1;for(var a=0;a<e.length;a++){var i=e[a],o=Ae(i);if(r&&r.has(o)&&!r.get(o).includes(t[a]))return!1;if(i.viableLetters&&!i.viableLetters.includes(t[a]))return!1}return!0}))}function L(e,t,r,n){var a=r.findIndex((function(e){return Ae(e)===n}));return e.substring(0,a)+t+e.substring(a+1)}function q(){var e=f.sections,t=Me();e.forEach((function(e){e.candidates.forEach((function(r,n){var a=Oe(e.squares);r.isFilteredOut=!1;var i,o=Object(m.a)(a);try{for(o.s();!(i=o.n()).done;){var s=i.value,c=je(t,s),l=je(r.grid,s);Ie(c)&&l.content!==c.content&&(r.isFilteredOut=!0)}}catch(u){o.e(u)}finally{o.f()}}))}))}function O(e,t,r){void 0===r&&(r=h.ChosenSection);var n=me(e),a=f.sections.get(t.sectionId),i=!1;return a.squares.forEach((function(e,a){var o=je(n,a),s=je(t.grid,a);Ie(o)&&o.content!==s.content&&(i=!0),o.content=s.content,o.viableLetters=[o.content],Ie(o)||(o.contentType=[h.HoverChosenSection,h.Autofill].includes(r)?h.Autofill:h.ChosenSection)})),!i&&(Se(n,(function(t){e.squares[t.row][t.col]=t})),a.words.forEach((function(t,r){var n=e.words.get(r),a=we(e,n);e.usedWords.set(se(a),!0)})),a.neighboringCrosses.forEach((function(t,r){var n=e.words.get(r);oe(we(e,n))})),e.userFilledSectionCandidates.set(R(a,e),!0),!0)}function x(e){var t=new Map,r=new Map,n=1,i=U(0);return Se(e,(function(e){ye(e)||i.squares.set(Ae(e),!0)})),e.words.forEach((function(e){i.words.set(ze(e),!0)})),t.set(0,i),Se(e,(function(i){if(!r.has(Ae(i))&&B(e,i)){var o=U(n);if(function e(t,r,n,i){t.openSquareCount++,i.set(Ae(n),!0),K(r,n).forEach((function(n){!i.has(Ae(n))&&B(r,n)&&e(t,r,n,i),[a.Across,a.Down].forEach((function(e){var a=Ee(r,n.row,n.col,e);void 0===a||t.words.has(ze(a))||(t.words.set(ze(a),!0),we(r,a).forEach((function(e){t.squares.set(Ae(e),!0)})))}))}))}(o,e,i,r),1===o.openSquareCount)return;t.set(o.id,o),n++}})),2===t.size&&t.delete(1),t.forEach((function(t){t.stackWords=new Map,t.words.forEach((function(r,n){if(!t.stackWords.has(n)){var a=e.words.get(n),i=Oe(t.words).filter((function(t){if(t===n)return!1;var r=e.words.get(t);return Ge(a)&&Ge(r)&&1===Math.abs(a.start[0]-r.start[0])?Math.min(a.end[1],r.end[1])-Math.max(a.start[1],r.start[1])+1>=5:!Ge(a)&&!Ge(r)&&1===Math.abs(a.start[1]-r.start[1])&&Math.min(a.end[0],r.end[0])-Math.max(a.start[0],r.start[0])+1>=5}));i.length>0&&(t.stackWords.set(n,!0),i.forEach((function(e){t.stackWords.set(e,!0)})))}}))})),t.forEach((function(t){t.words.forEach((function(r,n){var a=e.words.get(n);ee(e,a).forEach((function(e){var r=ze(e);t.words.has(r)||t.neighboringCrosses.set(r,!0)}))}))})),t.forEach((function(r){if(0===r.id){var n=[],a=new Map;return I(xe(t)).forEach((function(r){if(!(0===r&&t.size>1)){var i=G(e,t.get(r));n.push.apply(n,Object(p.a)(i.filter((function(e){return!a.has(e)})))),i.forEach((function(e){a.set(e,!0)}))}})),Oe(r.words).filter((function(e){return!a.has(e)})).forEach((function(e){n.push(e)})),void(r.wordOrder=n)}r.wordOrder=G(e,r)})),t.forEach((function(e){t.forEach((function(t,r){r!==e.id&&Oe(t.words).find((function(t){return e.words.has(t)}))&&e.connections.set(r,!0)}))})),t}function I(e){return e.sort((function(e,t){return 0===e.id?-1:0===t.id?1:e.connections.size!==t.connections.size?t.connections.size-e.connections.size:t.squares.size-e.squares.size})).map((function(e){return e.id}))}function G(e,t){function r(e,t){return ke(e)!==ke(t)?ke(t)-ke(e):e.direction===a.Across?e.start[0]-t.start[0]:e.start[1]-t.start[1]}function n(e){if(0!==e.length){if(1===e.length)return i.push(ze(e[0])),void o.set(ze(e[0]),!0);var t=Math.floor((j(e[e.length-1])-j(e[0]))/2);i.push(ze(e[t])),o.set(ze(e[t]),!0),n(e.slice(0,t)),n(e.slice(t+1))}}var i=[],o=new Map;if(t.stackWords.size>0){var s=Oe(t.stackWords).map((function(t){return e.words.get(t)})).filter((function(e){return e.direction===a.Across})).sort(r),c=Oe(t.stackWords).map((function(t){return e.words.get(t)})).filter((function(e){return e.direction===a.Down})).sort(r),l=0===c.length?s:0===s.length?c:ke(s[0])>=ke(c[0])?s:c;[l,l===s?c:s].forEach((function(e){for(var t=0;t<e.length;t++){for(var r=e[t],a=ke(r),i=[r],o=j(r),s=t+1;s<e.length&&ke(e[s])===a;s++){var c=e[s],l=j(c);if(l-o!==1)break;i.push(c),o=l,t++}n(i)}}))}return Oe(t.words).filter((function(e){return!o.has(e)})).map((function(t){return e.words.get(t)})).sort(r).forEach((function(e){i.push(ze(e))})),i}function j(e){return e.direction===a.Across?e.start[0]:e.start[1]}function B(e,t){var r=K(e,t);return 8===r.length&&!r.find((function(e){return ye(e)}))}function K(e,t){var r=[],n=t.row>0,a=t.row<e.height-1,i=t.col>0,o=t.col<e.width-1;return n&&i&&r.push(e.squares[t.row-1][t.col-1]),n&&r.push(e.squares[t.row-1][t.col]),n&&o&&r.push(e.squares[t.row-1][t.col+1]),o&&r.push(e.squares[t.row][t.col+1]),a&&o&&r.push(e.squares[t.row+1][t.col+1]),a&&r.push(e.squares[t.row+1][t.col]),a&&i&&r.push(e.squares[t.row+1][t.col-1]),i&&r.push(e.squares[t.row][t.col-1]),r}function T(e,t,r){var n=0;return r.words.forEach((function(e,r){var a=t.words.get(r),i=ne(se(we(t,a)));n+=i})),e.iffyWordKey||(n*=10),n/r.words.size}var F={A:"Alfa",B:"Bravo",C:"Charlie",D:"Delta",E:"Echo",F:"Foxtrot",G:"Golf",H:"Hotel",I:"India",J:"Juliett",K:"Kilo",L:"Lima",M:"Mike",N:"November",O:"Oscar",P:"Papa",Q:"Quebec",R:"Romeo",S:"Sierra",T:"Tango",U:"Uniform",V:"Victor",W:"Whiskey",X:"X-ray",Y:"Yankee",Z:"Zulu"};function R(e,t){return Oe(e.squares).sort().map((function(e){return je(t,e).content})).join("")}function U(e){return{id:e,openSquareCount:0,squares:new Map,words:new Map,stackWords:new Map,wordOrder:[],neighboringCrosses:new Map,candidates:new Map,connections:new Map,comboPermsQueue:[],comboPermsUsed:new Map}}function D(){var e=[];return f.sections.forEach((function(t,r){f.selectedSectionCandidateKeys.forEach((function(r,n){t.candidates.has(r)&&e.push(t.candidates.get(r))}))})),e}function P(e){return f.sections.get(e.sectionId)}function V(e){return xe(f.sections).filter((function(t){return t.id>0&&t.words.has(ze(e))}))}function H(e,t){if(void 0===t&&(t=h.Autofill),!e.chosenEntry)return!1;var r=me(e.startGrid),n=e.fillWord,a=we(r,n),i=ee(r,n);a.forEach((function(r,n){r.content=e.chosenEntry.word[n],[h.Autofill,h.ChosenSection,h.HoverChosenWord].includes(r.contentType)&&(r.contentType=t)})),r.usedWords.set(se(a),!0),e.iffyWordKey=e.chosenEntry.iffyWordKey,t===h.ChosenWord&&function(e,t,r){Ke(Oe(e.userFilledSectionCandidates)).forEach((function(n){var a=f.sections.get(n.sectionId);t.forEach((function(t,i){n.grid.squares[t.row][t.col].content!==r[i]&&e.userFilledSectionCandidates.delete(R(a,e))}))}))}(r,a,e.chosenEntry.word),i.forEach((function(e){var t=we(r,e);oe(t),Ne(t)&&r.usedWords.set(se(t),!0)})),e.endGrid=r}var Q;function Z(){var e=Le(),t=e.fillQueue;if(!t){var r=function(){var e=[],t=function(e){return 2*e+1},r=function(e){return 2*e+2},n=function(t){return r(t)<e.length},a=function(t,r){var n=e[t];e[t]=e[r],e[r]=n};return{isEmpty:function(){return 0===e.length},peek:function(){return 0===e.length?null:e[0].value},size:function(){return e.length},insert:function(t,r){e.push({key:r,value:t});for(var n,a=e.length-1;a>0;){var i=(n=a,Math.floor((n-1)/2));if(e[i].key>e[a].key)break;var o=e[a];e[a]=e[i],e[i]=o,a=i}},pop:function(){if(0===e.length)return null;a(0,e.length-1);for(var i=e.pop(),o=0;t(o)<e.length;){var s=t(o);if(n(o)&&e[r(o)].key>e[t(o)].key&&(s=r(o)),e[s].key<e[o].key)break;a(o,s),o=s}return i.value}}}();Y(r),t=r,e.fillQueue=r}var n=t.peek();if(!n&&(Y(t),!(n=t.peek())))return!1;for(;n.needsNewPriority||n.shouldBeDeleted;)if(n.needsNewPriority=!1,t.pop(),n.shouldBeDeleted||t.insert(n,X(n)),!(n=t.peek()))return!1;for(;n.isChainNode&&n.chainId!==f.curChainId;)if(t.pop(),!(n=t.peek()))return!1;if(!n.isChainNode&&f.activeGrid!==n.startGrid)return f.activeGrid=n.startGrid,!0;if(function(e,t){e.fillWord||(e.fillWord=_(e,t));if(0===e.anchorSquareKeys.length||e.anchorCombosLeft.length>0){if(!S(e,!1))return!1}var r=re(e);if(r.length>0)return e.chosenEntry=function(e){var t=e[0].score,r=0;e.forEach((function(e){r+=Math.pow(e.score/t,4)}));var n,a=Math.random()*r,i=0,o=Object(m.a)(e);try{for(o.s();!(n=o.n()).done;){var s=n.value;if((i+=Math.pow(s.score/t,4))>=a)return s}}catch(c){o.e(c)}finally{o.f()}return e[0]}(r),H(e),!0;return!1}(n,e)){var a=function(e,t){var r=[];return Oe(t.squares).sort().forEach((function(t){var n=je(e,t).content;r.push(n||"-")})),r.join("")}(n.endGrid,e);if(!a.includes("-")){var i=!1;if(!e.candidates.has(a)){var o=function(e,t){var r=me(e.endGrid);return{sectionId:t.id,grid:r,score:T(e,r,t),iffyEntry:e.iffyWordKey?Be(r,e.iffyWordKey):void 0,isFilteredOut:!1}}(n,e);e.candidates.set(a,o),f.activeGrid=n.endGrid,i=!0}return J(n,i),t.pop(),!0}f.activeGrid=n.endGrid;var s=$(n.endGrid,n.depth+1,!0,n);if(0===e.id){var c=_(n,Le()),l=V(n.fillWord),u=V(c);l.length>0&&!l.find((function(e){return u.find((function(t){return t.id===e.id}))}))&&(s=$(n.endGrid,n.depth+1,!1,n,!0),f.curChainId++)}t.insert(s,X(s))}else t.pop(),n.isChainNode&&J(n),Z();return f.selectedWordNode=void 0,!0}function J(e,t){void 0===t&&(t=!1);var r=e.parent;if(r){var n=r.chosenEntry;if(r.isChainNode?(n&&(n.wasChainFailure=!0),r.backtracks++):n&&(n.hasBeenChained=!0),r.chosenEntry=void 0,r.iffyWordKey=r.parent?r.parent.iffyWordKey:void 0,r.endGrid=me(r.startGrid),r.backtracks>=3&&(r.parent&&!r.parent.isChainNode&&(r.isChainNode=!1,r.needsNewPriority=!0,f.curChainId++),J(r)),t){if(e.iffyWordKey&&e.chainBaseNode.chainIffyCandidates<24)return void e.chainBaseNode.chainIffyCandidates++;if(!e.iffyWordKey&&e.chainBaseNode.chainGoodCandidates<4)return void e.chainBaseNode.chainGoodCandidates++;e.chainBaseNode.chainGoodCandidates=0,e.chainBaseNode.chainIffyCandidates=0;for(var a=r;a.parent&&(a.parent.isChainNode||a.parent.isSectionBase);)a.isSectionBase&&(a.shouldBeDeleted=!0),a=a.parent;a.isChainNode=!1,a.needsNewPriority=!0,f.curChainId++}}}function X(e){var t,r=e.startGrid,n=0;return r.usedWords.forEach((function(e,t){n+=ne(t)})),t=e.isChainNode?1e8+1e4*(e.depth+1):e.isSectionBase?1e4*(1e4+e.depth):1e4*(1e4-e.depth),n+t}function Y(e){var t=Me(),r=[f.activeSectionId],n=Le(),a=Oe(n.connections).filter((function(e){return r.includes(e)&&void 0===f.sections.get(e).selectedCandidate&&f.sections.get(e).candidates.size>0})).sort();!function(e,t){function r(e){return"["+e.map((function(e){return e.toString()})).join(",")+"]"}t.comboPermsUsed.size>0&&t.comboPermsQueue.length>0&&-1===t.comboPermsQueue[0][0]&&t.comboPermsQueue.shift();if(t.comboPermsUsed.size>0&&0===t.comboPermsQueue.length)return;if(0===e.length){var n=[-1];return t.comboPermsQueue=[n],void t.comboPermsUsed.set(r(n),!0)}if(0===t.comboPermsUsed.size){for(var a=[],i=0;i<e.length;i++)a.push(1);return t.comboPermsQueue=[a],void t.comboPermsUsed.set(r(a),!0)}for(;;){var o=t.comboPermsQueue.shift();if(!o)break;for(var s=!1,c=0;c<o.length;c++)if(o[c]!==e[c]-1){var l=me(o);l[c]++;var u=r(l);t.comboPermsUsed.has(u)||(t.comboPermsUsed.set(u,!0),s=!0,t.comboPermsQueue.push(l))}if(s)break}}(a.map((function(e){return f.sections.get(e).candidates.size})),n),n.comboPermsQueue.forEach((function(r){var n=$(t,0,!1,void 0);if(-1!==r[0]){for(var i=!0,o=0;o<r.length;o++){var s=xe(f.sections.get(a[o]).candidates).sort((function(e,t){return t.score-e.score}))[r[o]];O(n.startGrid,s,h.Autofill)||(i=!1)}i&&e.insert(n,X(n))}else e.insert(n,X(n))}))}function $(e,t,r,n,a){return{startGrid:me(e),endGrid:me(e),entryCandidates:[],depth:t,isChainNode:r,isSectionBase:!!a,backtracks:0,parent:n,chainBaseNode:r?n.isChainNode?n.chainBaseNode:n:void 0,needsNewPriority:!1,shouldBeDeleted:!1,anchorSquareKeys:[],anchorCombosLeft:[],viableLetterCounts:new Map,iffyWordKey:n?n.iffyWordKey:void 0,chainGoodCandidates:n?n.chainGoodCandidates:0,chainIffyCandidates:n?n.chainIffyCandidates:0,chainId:f.curChainId,topCrossScore:0,topMinCrossScore:0}}function _(e,t){var r,n=e.startGrid,a=Object(m.a)(t.wordOrder);try{for(a.s();!(r=a.n()).done;){var i=r.value,o=n.words.get(i);if(i===t.wordOrder[t.wordOrder.length-1])return o;var s=we(n,o);if(ze(o)!==e.iffyWordKey&&!Ne(s))return o}}catch(c){a.e(c)}finally{a.f()}}function ee(e,t){var r=we(e,t).map((function(r){return Ee(e,r.row,r.col,ge(t.direction))})).filter((function(e){return e})).map((function(e){return e}));return r.length>0?r:[]}function te(e,t){var r=we(e,t).map((function(r){return Ee(e,r.row,r.col,ge(t.direction))})).filter((function(t){return t&&!Ne(we(e,t))})).map((function(e){return e}));return r.length>0?r:[]}function re(e){return e.isChainNode?e.entryCandidates.filter((function(e){return e.isViable&&!e.wasChainFailure})):e.entryCandidates.filter((function(e){return e.isViable&&!e.hasBeenChained}))}function ne(e){var t=f.qualityClasses.get(e);if(!t)return 0;switch(t){case v.Lively:return 12;case v.Normal:return 9;case v.Crosswordese:return 3;case v.Iffy:return 1}}function ae(e){function t(e,t,n,i){var o=e.squares[t][n];if(!ye(o)&&(r.number||o.number)){r.number||(r.number=o.number,r.direction=i,r.start=[t,n]),r.end=[t,n];var s=i===a.Across?[t,n+1]:[t+1,n];(s[0]===e.height||s[1]===e.width||ye(e.squares[s[0]][s[1]]))&&((i===a.Across&&r.end[1]-r.start[1]>0||i===a.Down&&r.end[0]-r.start[0]>0)&&e.words.set(ze(r),r),r=be())}}e.words=new Map,function(e){for(var t=1,r=0;r<e.height;r++)for(var n=0;n<e.width;n++){var a=e.squares[r][n];if(a.number=void 0,!ye(a)){var i=0===r||ye(e.squares[r-1][n]),o=r===e.height-1||ye(e.squares[r+1][n]),s=0===n||ye(e.squares[r][n-1]),c=n===e.width-1||ye(e.squares[r][n+1]),l=i&&o||s&&c,u=i&&o&&s&&!c||s&&c&&i&&!o,d=i||s;(l&&u||!l&&d)&&(a.number=t++)}}}(e);for(var r=be(),n=0;n<e.height;n++)for(var i=0;i<e.width;i++)t(e,n,i,a.Across);for(var o=0;o<e.width;o++)for(var s=0;s<e.height;s++)t(e,s,o,a.Down)}function ie(e){if(e.usedWords=new Map,Se(e,(function(e){e.viableLetters=void 0})),f.wordList){var t=Oe(e.words);t.filter((function(e){return e.includes("A")})).concat(t.filter((function(e){return e.includes("D")}))).forEach((function(t){var r=e.words.get(t),n=me(we(e,r)),a=se(n);a.includes("-")||e.usedWords.set(a,!0),oe(n),void 0!==n&&n.length>0&&n.forEach((function(t){e.squares[t.row][t.col]=t}))}))}}function oe(e){if(e.forEach((function(e){e.content?e.viableLetters=[e.content]:e.viableLetters||(e.viableLetters=me(ve))})),!function(e){return!e.find((function(e){return!ye(e)&&e.content}))}(e)&&!Ne(e)){var t=C(se(e));if(!(t.length>500))for(var r=function(r){var n=e[r];if(n.content)return"continue";var a=n.viableLetters?function(e){var t=Array(26).fill(!1);return e.forEach((function(e){t[e.charCodeAt(0)]=!0})),t}(n.viableLetters):Array(26).fill(!0),i=Array(26).fill(!1);t.map((function(e){return e[r]})).forEach((function(e){n.viableLetters&&a[e.charCodeAt(0)-65]||function(e,t,r){e[t.charCodeAt(0)-65]=r}(i,e,!0)})),n.viableLetters=Fe(i)},n=0;n<e.length;n++)r(n)}}function se(e){return e.map((function(e){return e.content?e.content:"-"})).join("")}function ce(e,t){for(var r=[],a=0;a<t;a++){r.push([]);for(var i=0;i<e;i++)r[a][i]={row:a,col:i,type:n.White,isCircled:!1,contentType:h.Autofill}}var o={height:t,width:e,squares:r,words:new Map,usedWords:new Map,userFilledSectionCandidates:new Map};return ae(o),o}function le(e){var t=Me(),r=t.width-1,n=t.height-1,a=e[0],i=e[1],o=[e];switch(f.gridSymmetry){case d.Rotate180:o.push([n-a,r-i]);break;case d.Rotate90:o.push([i,n-a]),o.push([n-a,r-i]),o.push([r-i,a]);break;case d.MirrorHorizontal:o.push([a,r-i]);break;case d.MirrorVertical:o.push([n-a,i]);break;case d.MirrorNWSE:o.push([r-i,n-a]);break;case d.MirrorNESW:o.push([i,a])}return o}function ue(e,t,r){if(void 0!==t.content){var n=Ee(e,t.row,t.col,r),a=n?we(e,n):[t],i=Ee(e,t.row,t.col,r),o=i?we(e,i):[t];if(a.length>1&&Ne(a)&&e.usedWords.delete(se(a)),o.length>1&&Ne(o)&&e.usedWords.delete(se(o)),a.find((function(e){return e.contentType===h.Autofill})));else if(a.find((function(e){return[h.User,h.ChosenWord].includes(e.contentType)}))){var s=D().map((function(e){return P(e)})).find((function(e){return e.squares.has(Ae(t))}));a.forEach((function(t){if(t.contentType!==h.User){var n=Ee(e,t.row,t.col,ge(r));if(t.contentType!==h.ChosenWord||n)we(e,n).find((function(e){return[h.Autofill,h.ChosenSection].includes(e.contentType)}))&&(t.contentType=s?h.ChosenSection:h.Autofill);else t.contentType=h.Autofill}}))}t.content=void 0,t.contentType=h.Autofill,fe(e)}}function de(e,t){var r,n=P(t);null===(r=f.selectedSectionCandidateKeys)||void 0===r||r.delete(n.id),n.squares.forEach((function(t,r){var n=je(e,r);(function(e){var t=[];return D().forEach((function(r){f.sections.get(r.sectionId).squares.has(e)&&t.push(r)})),t})(r).length>1||n.contentType===h.ChosenSection&&(n.contentType=h.Autofill)}))}function fe(e){f.selectedWordNode=void 0;var t=Le();t.fillQueue=void 0,t.comboPermsQueue=[],t.comboPermsUsed=new Map,f.fillStatus=void 0!==f.wordList?Q.Ready:Q.NoWordList,Se(e,(function(e){(function(e){return e.contentType===h.User||e.contentType===h.ChosenWord||e.contentType===h.ChosenSection})(e)||(e.content=void 0)})),ie(e)}function he(e){if(f.selectedWordKey&&f.wordList){var t=$(e,0,!1,void 0);t.fillWord=e.words.get(f.selectedWordKey),f.useManualHeuristics?S(t,!0):k(t),f.selectedWordNode=t}else f.selectedWordNode=void 0}!function(e){e[e.NoWordList=0]="NoWordList",e[e.Ready=1]="Ready",e[e.Running=2]="Running",e[e.Complete=3]="Complete"}(Q||(Q={}));var ve="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");function me(e){return"object"!==typeof e||null===e?e:e instanceof Date?new Date(e.getTime()):e instanceof Map?new Map(Array.from(e.entries())):e instanceof Array?e.reduce((function(e,t,r){return e[r]=me(t),e}),[]):e instanceof Object?Object.keys(e).reduce((function(t,r){return t[r]=me(e[r]),t}),{}):void 0}function pe(e,t){return e[0]===t[0]&&e[1]===t[1]}function ye(e){return e.type===n.Black}function ge(e){return e===a.Across?a.Down:a.Across}function we(e,t){for(var r=t.start[0],n=t.start[1],i=[e.squares[r][n]];!pe([r,n],t.end);)r=t.direction===a.Across?r:r+1,n=t.direction===a.Across?n+1:n,i.push(e.squares[r][n]);return i}function Ee(e,t,r,n){var i=void 0;return e.words.forEach((function(e,o){n===a.Across&&e.direction===n&&e.start[0]===t&&e.start[1]<=r&&e.end[1]>=r&&(i=e),n===a.Down&&e.direction===n&&e.start[1]===r&&e.start[0]<=t&&e.end[0]>=t&&(i=e)})),i}function be(){return{number:void 0,direction:a.Across,start:[-1,-1],end:[-1,-1]}}function Ce(e,t,r){return e.direction===a.Across?e.start[0]===t&&e.start[1]<=r&&e.end[1]>=r:e.start[1]===r&&e.start[0]<=t&&e.end[0]>=t}function Ne(e){return!e.find((function(e){return!ye(e)&&!e.content}))}function Se(e,t){e.squares.forEach((function(e){e.forEach((function(e){t(e)}))}))}function ke(e){return e.direction===a.Across?e.end[1]-e.start[1]+1:e.end[0]-e.start[0]+1}function We(){return{title:"",author:"",copyright:"",clues:new Map,notes:""}}function ze(e){return"[".concat(e.start[0],",").concat(e.start[1],",").concat(e.direction===a.Across?"A":"D","]")}function Ae(e){return e?"[".concat(e.row,",").concat(e.col,"]"):""}function Me(){return f.activeGrid}function Le(){return f.sections.get(f.activeSectionId)}function qe(){var e=Me();if(f.selectedWordKey)return e.words.get(f.selectedWordKey)}function Oe(e){return Array.from(e.keys())||[]}function xe(e){return Array.from(e.values())||[]}function Ie(e){return e.contentType===h.User||e.contentType===h.ChosenWord}function Ge(e){return e.direction===a.Across}function je(e,t){var r=t.substring(1,t.length-1).split(",");return e.squares[+r[0]][+r[1]]}function Be(e,t){return se(we(e,e.words.get(t)))}function Ke(e){return e.map((function(e){var t;return null===(t=xe(f.sections).find((function(t){return t.candidates.has(e)})))||void 0===t?void 0:t.candidates.get(e)})).filter((function(e){return void 0!==e})).map((function(e){return e}))}function Te(){var e=Me();f.sections=x(e),f.activeSectionId=0,f.hoverSectionId=void 0,f.selectedSectionIds=new Map,f.selectedSectionIds.set(0,!0),f.selectedSectionCandidateKeys=new Map}function Fe(e){return e.map((function(e,t){return e?String.fromCharCode(t+65):""})).filter((function(e){return e}))}var Re=function(e){var t=Object(i.useState)(m()),r=Object(l.a)(t,2),n=r[0],s=r[1],c=Object(i.useState)(""),u=Object(l.a)(c,2),d=u[0],h=u[1],v=Object(i.useRef)([]);function m(){var e=[];if(!f.puzzle)return e;var t=Me(),r=t.words,n=f.puzzle.clues;return xe(r).sort((function(e,t){return(e.number||0)-(t.number||0)})).forEach((function(r){var a=ze(r),i=we(t,r),o={number:r.number,key:a,direction:r.direction,clue:n.get(a)||"",entry:se(i),isOpenForEditing:!1};e.push(o)})),e}function p(e){for(var t=e.target;!["clue"].includes(t.classList[0]);)if(!(t=t.parentElement))return;var r=t.attributes["data-key"].value,a=+t.attributes["data-ref-index"].value,i=v.current[a].current,o=me(n),c=o.find((function(e){return e.key===r}));c.isOpenForEditing=!c.isOpenForEditing,s(o),c.isOpenForEditing&&(i.value=c.clue,i.style.display="inherit",i.focus())}function y(e){var t=e.target,r=t.attributes["data-key"].value;"ENTER"===e.key.toUpperCase()&&function(e,t){var r=me(n),a=r.find((function(t){return t.key===e}));a.clue="(blank clue)"===t?"":t,a.isOpenForEditing=!1,f.puzzle.clues.set(e,t),s(r)}(r,t.value)}function g(e){e.target.select()}function w(e,t,r){return o.a.createElement("div",{className:"clues-container"},o.a.createElement("div",{className:"clues-header"},e?"ACROSS":"DOWN"),o.a.createElement("div",{className:"clues-clues"},t.map((function(e){v.current.push(Object(i.createRef)());var t=o.a.createElement("div",{key:e.key},o.a.createElement("div",{className:"clue"+(e.key===d?" clue-selected":""),"data-key":e.key,onClick:p,"data-ref-index":r},o.a.createElement("div",{className:"clue-number"},e.number),o.a.createElement("div",{className:"clue-entry"},e.entry),e.entry.length>15&&o.a.createElement("br",null),e.clue.length>0?e.clue:"(blank clue)"),o.a.createElement("textarea",{className:"clue-editor",defaultValue:e.clue,"data-key":e.key,style:{display:e.isOpenForEditing?"inherit":"none"},onKeyDown:y,onFocus:g,ref:v.current[r]}));return r++,t}))))}Object(i.useEffect)((function(){s(m()),h(f.selectedWordKey)}),[e.updateSemaphore]),v.current=[];var E=n.filter((function(e){return e.direction===a.Across})),b=n.filter((function(e){return e.direction===a.Down}));return o.a.createElement("div",{className:"clues-view"},w(!0,E,0),w(!1,b,E.length))};r(17);var Ue=function(){var e=Object(i.useContext)(u),t=Object(i.useState)(!0),r=Object(l.a)(t,2),n=r[0],a=r[1],s=Object(i.useState)(!1),c=Object(l.a)(s,2),v=c[0],m=c[1],p=Object(i.useState)(!1),y=Object(l.a)(p,2),g=y[0],w=y[1];function b(){e.triggerUpdate()}function C(e){f.fillStatus=e,b()}function N(e,t,r){var n=f.selectedWordNode;return function(e,t,r,n,a){var i=e.startGrid;e.fillWord=i.words.get(t),e.chosenEntry=e.entryCandidates.find((function(e){return e.word===r&&e.iffyWordKey===n})),H(e,a)}(n,f.selectedWordKey,e,t,r?h.HoverChosenWord:h.ChosenWord),n}function S(e,t){var r=$(Me(),0,!1,void 0),n=Le().candidates.get(e);return O(r.endGrid,n,t?h.HoverChosenSection:h.ChosenSection),r}function k(e){for(var t=e.target;t.classList.length<1||"fill-list-row-wrapper"!==t.classList[0];)if(!(t=t.parentElement))return;if(f.selectedWordKey){var r=t.attributes["data-word"].value,n=t.attributes["data-iffykey"].value;"na"===n&&(n=void 0);var a=N(r,n,!1);he(a.endGrid),f.activeGrid=a.endGrid,q(),f.hoverGrid=void 0,b()}}function W(e){for(var t=e.target;t.classList.length<1||"fill-list-row-wrapper"!==t.classList[0];)if(!(t=t.parentElement))return;if(f.selectedWordKey){var r=t.attributes["data-word"].value,n=t.attributes["data-iffykey"].value;"na"===n&&(n=void 0);var a=N(r,n,!0);f.hoverGrid=a.endGrid,b()}}function z(e){for(var t=e.target;t.classList.length<1||"fill-list-row-wrapper"!==t.classList[0];){if("section-checkbox"===t.classList[0])return;if(!(t=t.parentElement))return}var r=+t.attributes["data-id"].value;fe(Me()),r===f.activeSectionId?(f.activeSectionId=0,f.selectedSectionIds=new Map,f.selectedSectionIds.set(r,!0)):(f.activeSectionId=r,f.selectedSectionIds=new Map,f.selectedSectionIds.set(r,!0)),f.hoverGrid=void 0,f.hoverSectionId=void 0,b()}function A(e){}function M(e){for(var t=e.target;t.classList.length<1||"fill-list-row-wrapper"!==t.classList[0];)if(!(t=t.parentElement))return;var r=+t.attributes["data-id"].value;f.hoverSectionId=r,b()}function L(e){function t(){n.selectedCandidate=void 0,n.comboPermsQueue=[],n.comboPermsUsed=new Map;var e=n.candidates.get(i);de(a,e),fe(a)}for(var r=e.target;r.classList.length<1||"fill-list-row-wrapper"!==r.classList[0];)if(!(r=r.parentElement))return;var n=Le(),a=Me(),i=r.attributes["data-candidate-key"].value;if(n.selectedCandidate===i)t();else{n.selectedCandidate&&t();var o=S(i,!1);f.selectedSectionCandidateKeys.set(n.id,i),n.selectedCandidate=i,he(o.endGrid),f.activeGrid=o.endGrid}q(),f.hoverGrid=void 0,b()}function x(e){for(var t=e.target;t.classList.length<1||"fill-list-row-wrapper"!==t.classList[0];)if(!(t=t.parentElement))return;var r=S(t.attributes["data-candidate-key"].value,!0);f.hoverGrid=r.endGrid,b()}!function(e,t){var r=Object(i.useRef)();Object(i.useEffect)((function(){r.current=e}),[e]),Object(i.useEffect)((function(){if(null!==t){var e=setInterval((function(){r.current&&r.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){f.fillStatus!==Q.Complete&&(Z()||(fe(Me()),C(Q.Complete),w(!1)),b())}),g?5:null);var G=Me(),j=d[f.gridSymmetry],B=G&&G.width!==G.height?["None","Rotate180","MirrorHorizontal","MirrorVertical"]:Object.values(d).filter((function(e){return isNaN(Number(e))})),K=function(e){switch(e){case Q.NoWordList:return"No Word List Loaded";case Q.Ready:return"Ready to Fill";case Q.Running:return"Fill Running...";case Q.Complete:return"Fill Complete";default:return""}}(f.fillStatus),T=f.wordLists||[],D=f.selectedWordNode?f.selectedWordNode.entryCandidates:[],P=f.selectedWordNode&&0===D.length,V=[];f.sections&&(V=I(xe(f.sections)).map((function(e){return f.sections.get(e)})));var J=f.sections?f.sections.get(f.activeSectionId):U(-1),X=J.selectedCandidate,Y=Oe(f.selectedSectionIds)||[0],_=xe(J.candidates).filter((function(e){return!e.isFilteredOut})).sort((function(e,t){return t.score-e.score})),ee=f.selectedWordKey?Be(G,f.selectedWordKey):"",te=f.maxIffyLength||0,re=void 0===f.useManualHeuristics||f.useManualHeuristics;return o.a.createElement("div",{id:"FillView",className:"fill-container"},o.a.createElement("input",{id:"open-wordlist-input",hidden:!0,type:"file",accept:".dict,.txt",onChange:function(e){var t=e.target.files[0];e.target.value=null,m(!0),setTimeout((function(){(function(e,t){return E.apply(this,arguments)})(t.name,t).then((function(e){if(e){f.wordLists.push(e),C(Q.Ready);var t=Me();ie(t),he(t),m(!1),b()}}))}),5)}}),o.a.createElement("div",{id:"loader",style:{display:v?"block":"none"}}),o.a.createElement("div",{className:"fill-status"+(f.fillStatus===Q.NoWordList?" fill-status-red":f.fillStatus===Q.Running?" fill-status-green":"")},K),T.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"custom-control custom-switch fill-switch"},o.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"fillSwitch",checked:g,onChange:function(){g?(fe(Me()),C(Q.Ready),w(!1),b()):(C(Q.Running),w(!0))}}),o.a.createElement("label",{className:"custom-control-label",htmlFor:"fillSwitch"},"Fill")),o.a.createElement("br",null),"Max Iffy Length: ",o.a.createElement("br",null),o.a.createElement("select",{className:"custom-select iffy-select",defaultValue:te,onChange:function(e){f.maxIffyLength=+e.target[e.target.selectedIndex].value}},o.a.createElement("option",{value:0,key:0},"Off"),[2,3,4,5,6,7].map((function(e){return o.a.createElement("option",{value:e,key:e},e)})))),o.a.createElement("br",null),o.a.createElement("br",null),"Grid Symmetry: ",o.a.createElement("br",null),o.a.createElement("select",{className:"custom-select symmetry-select",defaultValue:j,onChange:function(e){f.gridSymmetry=+d[e.target[e.target.selectedIndex].value]}},B.map((function(e){return o.a.createElement("option",{value:e,key:e},function(e){switch(e){case"None":return"None";case"Rotate180":return"180\xb0 Rotational";case"Rotate90":return"90\xb0 Rotational";case"MirrorHorizontal":return"Mirror Horizontally";case"MirrorVertical":return"Mirror Vertically";case"MirrorNWSE":return"Mirror NW to SE";case"MirrorNESW":return"Mirror NE to SW"}return""}(e.toString()))}))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-primary",onClick:function(e){f.wordList&&(Z()||(fe(Me()),C(Q.Complete)),b())},style:{display:"none"}},"Fill Word"),o.a.createElement("div",{className:"fill-lists"},o.a.createElement("div",{className:"fill-list-box"},o.a.createElement("div",{className:"fill-list-title"},"Word Lists"),o.a.createElement("div",{className:"fill-list-button",onClick:function(){window.confirm("Are you sure you want to clear the word lists?")&&(f.wordList=void 0,f.wordLists=[],C(Q.NoWordList),f.selectedWordNode=void 0,f.qualityClasses=new Map)}},"Clear"),o.a.createElement("div",{className:"fill-list-button",onClick:function(){document.getElementById("open-wordlist-input").click()}},"Load"),o.a.createElement("div",{className:"fill-list",style:{gridTemplateColumns:"4fr 1fr"}},o.a.createElement("div",{className:"fill-list-header"},"Filename"),o.a.createElement("div",{className:"fill-list-header"},"Count"),0===T.length&&o.a.createElement("div",{className:"fill-list-row-wrapper",style:{cursor:"auto"}},o.a.createElement("div",null,o.a.createElement("i",null,"No word lists loaded")),o.a.createElement("div",null)),T.map((function(e){return o.a.createElement("div",{className:"fill-list-row-wrapper",style:{cursor:"auto"},key:e.filename},o.a.createElement("div",null,e.filename),o.a.createElement("div",null,e.wordCount))})))),o.a.createElement("div",{className:"fill-list-box",onMouseOut:function(){f.hoverGrid=void 0,b()}},o.a.createElement("div",{className:"fill-list-title entry-color"},"Entry Candidates"),o.a.createElement("div",{className:"fill-sec-checkbox"},o.a.createElement("input",{type:"checkbox",className:"section-checkbox",id:"use-heuristics-box",checked:re,onChange:function(){var e=void 0!==f.useManualHeuristics&&!f.useManualHeuristics;f.useManualHeuristics=e,b(),f.selectedWordNode&&he(G)}}),o.a.createElement("label",{htmlFor:"use-heuristics-box"},"Use heuristics")),o.a.createElement("div",{className:"fill-list",style:{gridTemplateColumns:"4fr 1fr 2fr"}},o.a.createElement("div",{className:"fill-list-header"},"Entry"),o.a.createElement("div",{className:"fill-list-header"},"Score"),o.a.createElement("div",{className:"fill-list-header"},"Iffy"),P&&re&&o.a.createElement("div",{className:"fill-list-row-wrapper"},o.a.createElement("div",null,o.a.createElement("i",null,"No viable entries")),o.a.createElement("div",null),o.a.createElement("div",null)),D.map((function(e){return o.a.createElement("div",{className:"fill-list-row-wrapper"+(ee===e.word?" fill-list-row-selected":""),key:e.word+(e.iffyEntry||""),"data-word":e.word,"data-iffykey":e.iffyWordKey||"na",onClick:k,onMouseOver:W},o.a.createElement("div",null,e.word),o.a.createElement("div",null,e.score.toFixed(0)),o.a.createElement("div",null,e.iffyEntry||""))})))),o.a.createElement("div",{className:"fill-list-box",onMouseOut:function(){f.hoverSectionId=void 0,b()}},o.a.createElement("div",{className:"fill-list-title section-color"},"Sections"),o.a.createElement("div",{className:"fill-list",style:{gridTemplateColumns:"1fr 2fr 1fr 1fr 1fr"}},o.a.createElement("div",{className:"fill-list-header"},"Active"),o.a.createElement("div",{className:"fill-list-header"},"ID"),o.a.createElement("div",{className:"fill-list-header"},"Size"),o.a.createElement("div",{className:"fill-list-header"},"Conn"),o.a.createElement("div",{className:"fill-list-header"},"Fills"),V.map((function(e){return o.a.createElement("div",{className:"fill-list-row-wrapper"+(e.id===J.id?" fill-list-row-selected":""),key:e.id,"data-id":e.id,onClick:z,onMouseOver:M},o.a.createElement("div",null,o.a.createElement("input",{type:"checkbox",className:"section-checkbox",checked:Y.includes(e.id),onChange:A})),o.a.createElement("div",null,0===(t=e.id)?"Full Grid":t<=26?F[String.fromCharCode(t+64)]:"Section "+t.toString()),o.a.createElement("div",null,e.squares.size),o.a.createElement("div",null,e.connections.size),o.a.createElement("div",null,e.candidates.size));var t})))),o.a.createElement("div",{className:"fill-list-box",onMouseOut:function(){f.hoverGrid=void 0,b()}},o.a.createElement("div",{className:"fill-list-title"},"Fills ",_.length>0?"(".concat(_.length,")"):""),o.a.createElement("div",{className:"fill-list-button",onClick:function(){if(window.confirm("Are you sure you want to clear the fills?")){var e=Le();e.candidates=new Map,e.selectedCandidate=void 0,b()}}},"Clear"),o.a.createElement("div",{className:"fill-sec-checkbox"},o.a.createElement("input",{type:"checkbox",className:"section-checkbox",id:"show-fills-box",checked:n,onChange:function(){a(!n)}}),o.a.createElement("label",{htmlFor:"show-fills-box"},"Show")),o.a.createElement("div",{className:"fill-list",style:{gridTemplateColumns:"4fr 1fr 2fr"}},o.a.createElement("div",{className:"fill-list-header"},"Longest"),o.a.createElement("div",{className:"fill-list-header"},"Score"),o.a.createElement("div",{className:"fill-list-header"},"Iffy"),!n&&o.a.createElement("div",{className:"fill-list-row-wrapper"},o.a.createElement("div",null,o.a.createElement("i",null,"Hidden")),o.a.createElement("div",null),o.a.createElement("div",null)),n&&f.fillStatus===Q.Complete&&0===_.length&&o.a.createElement("div",{className:"fill-list-row-wrapper"},o.a.createElement("div",null,o.a.createElement("i",null,"No fills found")),o.a.createElement("div",null),o.a.createElement("div",null)),n&&_.map((function(e){var t=se(we(e.grid,function(e){function t(e){return e.map((function(e){return r.words.get(e)})).sort((function(e,t){return ke(t)-ke(e)}))[0]}var r=Me();return e.stackWords.size>0?t(Oe(e.stackWords)):t(Oe(e.words))}(J))),r=R(J,e.grid);return o.a.createElement("div",{className:"fill-list-row-wrapper"+(X===r?" fill-list-row-selected":""),key:r,"data-candidate-key":r,onClick:L,onMouseOver:x},o.a.createElement("div",null,t),o.a.createElement("div",null,e.score.toFixed(2)),o.a.createElement("div",null,e.iffyEntry||""))}))))))};r(18);function De(e,t,r){return e>=t&&e<=r}var Pe=function(e){return function(e){var t,r=e.content||"";return e.type===n.White?o.a.createElement("div",{className:"grid-square"+(e.isSelected?" grid-square-selected":e.isInSelectedWord?" grid-square-selected-word":e.isInSelectedSection?" grid-square-selected-section":"")+(e.content?"":0===e.constraintSum?" grid-square-error-word":De(e.constraintSum,1,1)?" grid-square-constrained-5":De(e.constraintSum,1,3)?" grid-square-constrained-4":De(e.constraintSum,1,5)?" grid-square-constrained-3":De(e.constraintSum,1,10)?" grid-square-constrained-2":De(e.constraintSum,1,15)?" grid-square-constrained-1":""),"data-row":e.row,"data-col":e.col},e.isCircled&&o.a.createElement("div",{className:"grid-square-circled"}),o.a.createElement("div",{className:"grid-number"},null!==(t=e.number)&&void 0!==t?t:""),o.a.createElement("div",{className:"grid-content"+(r.length>1?" grid-content-rebus":"")+(e.content&&e.contentType===h.User?"":e.content&&e.contentType===h.ChosenWord?" grid-content-chosen-word":e.content&&e.contentType===h.HoverChosenWord?" grid-content-chosen-word-hover":e.content&&e.contentType===h.ChosenSection?" grid-content-chosen-section":e.content&&e.contentType===h.HoverChosenSection?" grid-content-chosen-section-hover":e.qualityClass===v.Lively?" grid-content-lively":e.qualityClass===v.Normal?" grid-content-normal":e.qualityClass===v.Crosswordese?" grid-content-crosswordese":e.qualityClass===v.Iffy?" grid-content-iffy":e.qualityClass===v.NotAThing?" grid-content-notathing":"")},r)):o.a.createElement("div",{className:"grid-square-black"+(e.isSelected?" grid-square-black-selected":""),"data-row":e.row,"data-col":e.col})}(e)};var Ve=function(){var e=Object(i.useState)([-1,-1]),t=Object(l.a)(e,2),r=t[0],s=t[1],c=Object(i.useContext)(u);function d(){var e=r;if(!m())return e;var t=Me(),n=f.selectedWordDir;if(n===a.Across&&e[1]===t.width-1||n===a.Down&&e[0]===t.height-1)return e;var i=n===a.Across?[e[0],e[1]+1]:[e[0]+1,e[1]];return s(i),y(i),i}function m(){return r[0]>-1}function p(e,t){return e.squares.has(Ae(t))}function y(e){var t=Ee(Me(),e[0],e[1],f.selectedWordDir);f.selectedWordKey=t?ze(t):void 0}function g(e,t,r,n,a){var i=e.squares[t][r];return{key:"".concat(t,",").concat(r),row:t,col:r,number:i.number,type:i.type,content:i.content,contentType:i.contentType,qualityClass:S.get(Ae(i))||v.Normal,isSelected:m()&&pe(n,[t,r]),isInSelectedWord:!!qe()&&Ce(a,t,r),isInSelectedSection:0!==f.activeSectionId&&p(Le(),i)||void 0!==f.hoverSectionId&&p(f.sections.get(f.hoverSectionId),i),constraintSum:i.viableLetters?i.viableLetters.length:26,isCircled:i.isCircled}}function w(e){"ENTER"===e.key.toUpperCase()&&e.preventDefault()}function E(e){!function(e){var t=document.createRange();t.selectNodeContents(e);var r=window.getSelection();r.removeAllRanges(),r.addRange(t)}(e.target)}for(var b,C=f.puzzle,N=f.hoverGrid?f.hoverGrid:Me(),S=function(e){var t=new Map;return xe(e.words).filter((function(e){return e.direction===a.Across})).forEach((function(r){var n=we(e,r);if(Ne(n)){var a=se(n),i=f.qualityClasses?f.qualityClasses.get(a):v.Normal;n.forEach((function(e){e.contentType===h.Autofill&&t.set(Ae(e),i||v.Iffy)}))}})),xe(e.words).filter((function(e){return e.direction===a.Down})).forEach((function(r){var n=we(e,r);if(Ne(n)){var a=se(n),i=f.qualityClasses?f.qualityClasses.get(a):v.Normal;n.forEach((function(e){if(e.contentType===h.Autofill){var r=t.get(Ae(e))||v.Normal;(!i||i<r)&&t.set(Ae(e),i||v.Iffy)}}))}})),t}(N),k=[],W=0;W<N.height;W++)for(var z=0;z<N.width;z++){var A=g(N,W,z,r,qe());k.push((b=A,o.a.createElement(Pe,b)))}var M={gridTemplateColumns:"repeat(".concat(N.width,", 1fr)")};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"puzzle-author-by"},"\xa0"),o.a.createElement("div",{id:"puzzleTitle",className:"puzzle-title editable",contentEditable:!0,suppressContentEditableWarning:!0,onKeyDown:w,onBlur:function(){var e=document.getElementById("puzzleTitle").innerText;f.puzzle.title="(title)"===e?"Untitled":e},onFocusCapture:E},C.title||"(title)"),o.a.createElement("div",{className:"puzzle-author-by"},"by\xa0"),o.a.createElement("div",{id:"puzzleAuthor",className:"puzzle-author editable",contentEditable:!0,suppressContentEditableWarning:!0,onKeyDown:w,onBlur:function(){var e=document.getElementById("puzzleAuthor").innerText;f.puzzle.author="(author)"===e?"":e},onFocusCapture:E},C.author||"(author)"),o.a.createElement("div",{className:"puzzle-author-by"},"\xa0"),o.a.createElement("div",{id:"puzzleCopyright",className:"puzzle-copyright editable",contentEditable:!0,suppressContentEditableWarning:!0,onKeyDown:w,onBlur:function(){var e=document.getElementById("puzzleCopyright").innerText;f.puzzle.copyright="\xa9 copyright"===e?"":e},onFocusCapture:E},C.copyright||"\xa9 copyright"),o.a.createElement("div",{id:"Grid",className:"grid-container",style:M,onClick:function(e){for(var t=e.target;t.classList.length<1||!["grid-square","grid-square-black"].includes(t.classList[0]);)if(!(t=t.parentElement))return;var i=+t.attributes["data-row"].value,o=+t.attributes["data-col"].value,l=Me(),u=f.selectedWordDir||a.Across,d=function(e,t,r){if(e.squares[t][r].type!==n.Black)return 0!==r&&e.squares[t][r-1].type!==n.Black||r!==e.width-1&&e.squares[t][r+1].type!==n.Black?0!==t&&e.squares[t-1][r].type!==n.Black||t!==e.height-1&&e.squares[t+1][r].type!==n.Black?void 0:a.Across:a.Down}(l,i,o);void 0!==d?(u=d,s([i,o])):pe([i,o],r)?u=ge(u):s([i,o]),f.selectedWordDir=u,y([i,o]),he(l),c.triggerUpdate()},onKeyDown:function(e){if(m()){var t=Me(),i=r[0],o=r[1],l=e.key.toUpperCase(),u=!1,v=!1,p=t.squares[i][o],g=[-1,-1];if(l.match(/^[A-Z]$/)){if(g=d(),p.type===n.Black)return;if(p.content===l&&p.contentType===h.User)return;u=!0,p.content!==l&&p.contentType!==h.User&&ue(t,p,f.selectedWordDir),(p=t.squares[i][o]).content=l,p.contentType=h.User}if("BACKSPACE"===l&&(g=function(){var e=r;if(!m())return e;var t=f.selectedWordDir;if(t===a.Across&&0===e[1]||t===a.Down&&0===e[0])return e;var n=t===a.Across?[e[0],e[1]-1]:[e[0]-1,e[1]];return s(n),y(n),n}(),void 0!==p.content&&(ue(t,p,f.selectedWordDir),u=!0),p.type===n.Black&&(le([i,o]).forEach((function(e){t.squares[e[0]][e[1]].type=n.White})),v=!0)),"."===l){g=d(),ue(t,p,f.selectedWordDir);var w=p.type===n.White?n.Black:n.White;le([i,o]).forEach((function(e){t.squares[e[0]][e[1]].type=w})),v=!0}if(","===l){if(p.type===n.Black)return;p.isCircled=!p.isCircled,y(g=d())}v?(ae(t),Te(),fe(t),y(g),ie(t)):u&&(q(),ie(t)),he(t),c.triggerUpdate()}},tabIndex:0},k),o.a.createElement("div",{className:"puzzle-notes-label"},"Notes:"),o.a.createElement("div",{id:"puzzleNotes",className:"puzzle-notes editable",contentEditable:!0,suppressContentEditableWarning:!0,onKeyDown:w,onBlur:function(){var e=document.getElementById("puzzleNotes").innerText;f.puzzle.notes="(notes)"===e?"":e},onFocusCapture:E},C.notes||"(notes)"))};r(19);function He(e){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(w.a)(g.a.mark((function e(t){var r,a,i,o,s,c,u,d,v,m,p,y,w,E,b,C,N,S,k,W,z,A,M,L,q,O,x,I,G,j;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.slice(2,14).text();case 2:if("ACROSS&DOWN\0"===e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.t0=Uint8Array,e.next=8,t.slice(44,45).arrayBuffer();case 8:return e.t1=e.sent,r=new e.t0(e.t1)[0],e.t2=Uint8Array,e.next=13,t.slice(45,46).arrayBuffer();case 13:return e.t3=e.sent,a=new e.t2(e.t3)[0],i=We(),e.t4=Ze,e.next=19,t.slice(52,t.size);case 19:return e.t5=e.sent,e.next=22,(0,e.t4)(e.t5);case 22:for(o=e.sent,s=ce(r,a),c=0,u=0;u<a;u++)for(d=0;d<r;d++)v=o[c],m=s.squares[u][d],"."===v&&(m.type=n.Black),v.match(/[A-Z]/)&&(m.content=v,m.contentType=h.User),c++;c*=2,ae(s),p=Xe(o,c),y=Object(l.a)(p,2),i.title=y[0],c=y[1],w=Xe(o,c),E=Object(l.a)(w,2),i.author=E[0],c=E[1],b=Xe(o,c),C=Object(l.a)(b,2),i.copyright=C[0],c=C[1],et(xe(s.words)).forEach((function(e){var t,r=Xe(o,c),n=Object(l.a)(r,2);t=n[0],c=n[1];var a=ze(e);i.clues.set(a,t)})),N=Xe(o,c),S=Object(l.a)(N,2),i.notes=S[0],c=S[1],k=new Map,W=new Map;case 48:if(!(c<o.length)){e.next=101;break}return z=o.slice(c,c+4),A=52+(c+=4),e.t6=Uint16Array,e.next=55,t.slice(A,A+2).arrayBuffer();case 55:if(e.t7=e.sent,M=new e.t6(e.t7)[0],c+=2,c+=2,"GRBS"!==z){e.next=78;break}L=52+c,u=0;case 62:if(!(u<a)){e.next=78;break}d=0;case 64:if(!(d<r)){e.next=75;break}return e.t8=Uint8Array,e.next=68,t.slice(L,L+1).arrayBuffer();case 68:e.t9=e.sent,q=new e.t8(e.t9)[0],L++,q>0&&k.set("".concat(u,",").concat(d),q-1);case 72:d++,e.next=64;break;case 75:u++,e.next=62;break;case 78:if("RTBL"===z&&(O=o.slice(c,c+M),O.split(";").forEach((function(e){var t=e.split(":"),r=+t[0].trim(),n=t[1];r>0&&W.set(r,n)}))),"GEXT"!==z){e.next=98;break}x=52+c,I=0;case 82:if(!(I<a)){e.next=98;break}G=0;case 84:if(!(G<r)){e.next=95;break}return e.t10=Uint8Array,e.next=88,t.slice(x,x+1).arrayBuffer();case 88:e.t11=e.sent,j=new e.t10(e.t11)[0],x++,128&j&&(s.squares[I][G].isCircled=!0);case 92:G++,e.next=84;break;case 95:I++,e.next=82;break;case 98:c+=M+1,e.next=48;break;case 101:return k.size>0&&k.forEach((function(e,t){var r=t.split(","),n=s.squares[+r[0]][+r[1]];n.content=W.get(e)[0],n.contentType=h.User})),f.activeGrid=s,e.abrupt("return",i);case 104:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){return Je.apply(this,arguments)}function Je(){return(Je=Object(w.a)(g.a.mark((function e(t){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Array,e.t1=Uint8Array,e.next=4,t.arrayBuffer();case 4:return e.t2=e.sent,e.t3=new e.t1(e.t2),r=e.t0.from.call(e.t0,e.t3),e.abrupt("return",r.map((function(e){return String.fromCharCode(e)})).join(""));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e,t){for(var r="";"\0"!==e[t];)r+=e[t],t++;return t++,[r.trim(),t]}function Ye(e,t,r,n){for(var a=0;a<r;a++)n=(n=n>>1|(1&n)<<15)+e[t+a]&65535;return n}function $e(e,t,r){for(var n=0;n<t.length;n++)e[r]=t[n].charCodeAt(0),r++}function _e(e,t,r,n){for(var a=n-1;a>=0;--a)e[r]=t%256,t>>=8,r++}function et(e){return me(e).sort((function(e,t){return e.start[0]!==t.start[0]?e.start[0]-t.start[0]:e.start[1]!==t.start[1]?e.start[1]-t.start[1]:e.direction===a.Across?-1:1}))}var tt=function(e){var t=Object(i.useContext)(u),r=Object(i.useRef)([Object(i.createRef)(),Object(i.createRef)()]);function n(e){var r=e.target.attributes["data-view-id"].value;t.switchActiveView(r)}function a(e){e.target.select()}return o.a.createElement("div",{id:"Menu"},o.a.createElement("input",{id:"open-puzzle-input",hidden:!0,type:"file",accept:".puz",onChange:function(e){var r=e.target.files[0];e.target.value=null,He(r).then((function(e){e&&t.setPuzzle(e)}))}}),o.a.createElement("div",{className:"site-title"},"CrossHatch"),o.a.createElement("div",{className:"menu-label"},"View: "),o.a.createElement("div",{className:"btn-group",role:"group",id:"view-change-group"},o.a.createElement("button",{type:"button","data-view-id":"Clues",className:"btn"+("Clues"===e.openView?" btn-primary":" btn-secondary"),onClick:n},"Clues"),o.a.createElement("button",{type:"button","data-view-id":"Fill",className:"btn"+("Fill"===e.openView?" btn-primary":" btn-secondary"),onClick:n},"Fill")),o.a.createElement("div",{className:"new-grid-group"},o.a.createElement("div",{className:"btn btn-primary",onClick:function(){if(window.confirm("Are you sure you want to start a new puzzle?")){var e=+r.current[0].current.value,n=+r.current[1].current.value;t.createNewPuzzle(e,n)}}},"New Puzzle"),o.a.createElement("input",{type:"text",className:"form-control",defaultValue:e.gridWidth,onFocus:a,ref:r.current[0]}),o.a.createElement("div",{className:"menu-gridsize-sep"},o.a.createElement("div",{style:{height:"6px",float:"none"}}),"x"),o.a.createElement("input",{type:"text",className:"form-control",defaultValue:e.gridHeight,onFocus:a,ref:r.current[1]})),o.a.createElement("div",{id:"loadPuz",className:"btn btn-primary menu-button",onClick:function(){document.getElementById("open-puzzle-input").click()}},"Load .puz"),o.a.createElement("div",{id:"exportPuz",className:"btn btn-primary menu-button",onClick:function(){t.exportPuz()}},"Export .puz"))};r(20);var rt=function(e){var t=Object(i.useState)(e.activeView),r=Object(l.a)(t,2),s=r[0],c=r[1],h=Object(i.useState)(7),v=Object(l.a)(h,2),m=v[0],p=v[1],y=Object(i.useState)(7),g=Object(l.a)(y,2),w=g[0],E=g[1],b=Object(i.useState)(0),C=Object(l.a)(b,2),N=C[0],S=C[1],k=Object(i.useState)(M()),W=Object(l.a)(k,2),z=W[0],A=W[1];function M(){return{triggerUpdate:L,switchActiveView:q,setPuzzle:x,createNewPuzzle:O,exportPuz:I}}function L(){S(N+1)}function q(e){c(e)}function O(e,t){G(void 0,e,t),L()}function x(e){var t=Me();G(e,t.width,t.height),L()}function I(){var e=f.puzzle,t=function(e){var t=Me(),r=new Uint8Array(128e3);$e(r,"ACROSS&DOWN\0",2),$e(r,"1.3\0",24),_e(r,t.width,44,1),_e(r,t.height,45,1),_e(r,t.words.size,46,2),_e(r,1,48,2),_e(r,0,50,2);for(var a=52,i=a,o=!1,s=0;s<t.height;s++)for(var c=0;c<t.width;c++){var l=t.squares[s][c],u=l.type===n.Black?".":l.content?l.content:" ";$e(r,u,a),a++,l.isCircled&&(o=!0)}for(var d=a,f=0;f<t.height;f++)for(var h=0;h<t.width;h++){var v=t.squares[f][h].type===n.Black?".":"-";$e(r,v,a),a++}var m=a;$e(r,e.title+"\0",a);var p=a+=e.title.length+1;$e(r,e.author+"\0",a);var y=a+=e.author.length+1;$e(r,e.copyright+"\0",a),a+=e.copyright.length+1;var g=[];et(xe(t.words)).forEach((function(t){var r=ze(t);g.push(e.clues.get(r)||"")}));var w=a;if(g.forEach((function(e){$e(r,e+"\0",a),a+=e.length+1})),$e(r,e.notes+"\0",a),a+=e.notes.length+1,o){var E=t.width*t.height;$e(r,"GEXT",a),_e(r,E,a+=4,2);var b=a+=2;a+=2;for(var C=0;C<t.height;C++)for(var N=0;N<t.width;N++){var S=t.squares[C][N];_e(r,S.isCircled?128:0,a,1),a++}$e(r,"\0",a),a++;var k=Ye(r,b+2,E,0);_e(r,k,b,2)}var W=Ye(r,44,8,0),z=W,A=t.width*t.height;z=Ye(r,i,A,z),z=Ye(r,d,A,z),e.title.length>0&&(z=Ye(r,m,e.title.length+1,z)),e.author.length>0&&(z=Ye(r,p,e.author.length+1,z)),e.copyright.length>0&&(z=Ye(r,y,e.copyright.length+1,z));for(var M=w,L=0;L<g.length;L++){var q=g[L];z=Ye(r,M,q.length,z),M+=q.length+1}_e(r,W,14,2),_e(r,z,0,2);var O=Ye(r,i,A,0),x=Ye(r,d,A,0),I=0;e.title.length>0&&(I=Ye(r,m,e.title.length+1,I)),e.author.length>0&&(I=Ye(r,p,e.author.length+1,I)),e.copyright.length>0&&(I=Ye(r,y,e.copyright.length+1,I)),M=w;for(var G=0;G<g.length;G++){var j=g[G];I=Ye(r,M,j.length,I),M+=j.length+1}_e(r,73^255&W,16,1),_e(r,67^255&O,17,1),_e(r,72^255&x,18,1),_e(r,69^255&I,19,1),_e(r,65^(65280&W)>>8,20,1),_e(r,84^(65280&O)>>8,21,1),_e(r,69^(65280&x)>>8,22,1),_e(r,68^(65280&I)>>8,23,1);var B=r.slice(0,a);return new Blob([B],{type:"application/octet-stream; charset=ISO-8859-1"})}(e),r=(e.title||"Untitled")+".puz",a=new File([t],r),i=window.URL.createObjectURL(a),o=document.getElementById("download-puzzle-link");o.setAttribute("href",i),o.setAttribute("download",r),o.click()}function G(e,t,r){var n=!!e;f.puzzle=e||We(),void 0===t&&(t=m),void 0===r&&(r=w),f.activeGrid&&n||(f.activeGrid=ce(t,r)),f.hoverGrid=void 0,f.selectedWordKey=void 0,f.selectedWordDir=a.Across,f.gridSymmetry||(f.gridSymmetry=d.Rotate180),void 0===f.useManualHeuristics&&(f.useManualHeuristics=!0),void 0===f.maxIffyLength&&(f.maxIffyLength=0),f.selectedWordNode=void 0,f.curChainId=1,void 0===f.wordLists&&(f.wordLists=[]),f.fillStatus=void 0!==f.wordList?Q.Ready:Q.NoWordList,Te(),fe(f.activeGrid),p(t),E(r)}return Object(i.useEffect)((function(){A(M())}),[N]),f.puzzle||(G(),L()),o.a.createElement(u.Provider,{value:z},o.a.createElement("a",{id:"download-puzzle-link",href:"http://www.example.com",style:{display:"none"}},"stuff"),o.a.createElement(tt,{gridHeight:w,gridWidth:m,openView:s}),o.a.createElement("div",{className:"left-panel"},"Clues"===s&&o.a.createElement(Re,{updateSemaphore:N}),"Fill"===s&&o.a.createElement(Ue,null)),o.a.createElement("div",{className:"right-panel"},o.a.createElement(Ve,null)))};r(21);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(rt,{activeView:"Fill"})),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.e9b92b81.chunk.js.map